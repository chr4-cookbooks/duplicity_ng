#
# This file is maintained by Chef for <%= node['fqdn'] %>.
# Local changes will be overwritten.
#
# vim: ft=sh

# The duplicity password
export PASSPHRASE="<%= @passphrase %>"

# Set GPG options (algorithms and compression)
export GPGOPT="--compress-algo=<%= @compress_algo %> -z=<%= @compress_level %> --cipher-algo=<%= @cipher_algo %> --digest-algo=<%= @digest_algo %>"

<% if @swift_username && @swift_password && @swift_authurl %>
# Settings for Swift backend
export SWIFT_USERNAME="<%= @swift_username %>"
export SWIFT_PASSWORD="<%= @swift_password %>"
export SWIFT_AUTHURL="<%= @swift_authurl %>"
<% end -%>

<% if @aws_access_key_id && @aws_secret_access_key %>
# Settings for S3
export AWS_ACCESS_KEY_ID="<%= @aws_access_key_id %>"
export AWS_SECRET_ACCESS_KEY="<%= @aws_secret_access_key %>"
<% end -%>

<% if @gs_access_key_id && @gs_secret_access_key %>
# Settings for GOOGLE CLOUD STORAGE
export GS_ACCESS_KEY_ID="<%= @gs_access_key_id %>"
export GS_SECRET_ACCESS_KEY="<%= @gs_secret_access_key %>"
<% end -%>

<% if @azure_account_name && @azure_account_key %>
# Settings for MS AZURE BLOB STORAGE
export AZURE_ACCOUNT_NAME="<%= @azure_account_name %>"
export AZURE_ACCOUNT_KEY="<%= @azure_account_key %>"
<% end -%>

<% if @ftp_password %>
# Settings for FTP / SFTP STORAGE
export FTP_PASSWORD="<%= @ftp_password %>"
<% end -%>

DUPLICITY_PATH="<%= @duplicity_path %>"
DUPLICITY_ARGUMENTS=(--tempdir <%= @temp_dir %> --archive-dir <%= @archive_dir %> <%= @backend %>)
